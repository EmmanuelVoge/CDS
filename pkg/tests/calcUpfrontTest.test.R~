## upfrontTest.test.R

library(CDS)

## old
## truth <- upFront(baseDate = "2008-01-03",
##                  types = "MMMMMSSSSSSSSS",
##                  dates = c(20080201, 20080203, 20080205),
##                  rates = c(1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9),
##                  nInstr = 10,
##                  mmDCC = 10,
##                  fixedSwapFreq = 10,
##                  floatSwapFreq = 10,
##                  fixedSwapDcc = 10,
##                  floatSwapDcc = 10,
##                  badDayConvZC = 'M',
##                  holidays = 'None',
##                  couponRate = 100)

## save(truth, file = "upfrontTest.test.RData")

## new
## truth <- calcUpfront("2008-01-03",
##                      types = "MMMMMSSSSSSSSS",
##                      dates = c(20080201, 20080203, 20080205),
##                      rates = c(1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9),
##                      nInstr = 10,
##                      mmDCC = 10,
##                      fixedSwapFreq = 10,
##                      floatSwapFreq = 10,
##                      fixedSwapDcc = 10,
##                      floatSwapDcc = 10,
##                      badDayConvZC = 'M',
##                      holidays = 'None',
##                      today = "2008-02-01",
##                      valueDate = "2008-02-01",
##                      benchmarkDate = "2008-02-02",
##                      startDate = "2008-02-08",
##                      endDate = "2008-02-12",
##                      stepinDate = "2008-02-9",
##                      couponRate = 100)
## save(truth, file = "upfrontTest.test.RData")

load("upfrontTest.test.RData")
result <- calcUpfront("2008-01-03",
                      types = "MMMMMSSSSSSSSS",
                      dates = c(20080201, 20080203, 20080205),
                      rates = c(1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9, 1e-9),
                      nInstr = 10,
                      mmDCC = 10,
                      fixedSwapFreq = 10,
                      floatSwapFreq = 10,
                      fixedSwapDcc = 10,
                      floatSwapDcc = 10,
                      badDayConvZC = 'M',
                      holidays = 'None',
                      today = "2008-02-01",
                      valueDate = "2008-02-01",
                      benchmarkDate = "2008-02-02",
                      startDate = "2008-02-08",
                      endDate = "2008-02-12",
                      stepinDate = "2008-02-9",
                      couponRate = 100)


stopifnot(all.equal(result, truth))
